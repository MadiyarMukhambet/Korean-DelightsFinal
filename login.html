<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Korean Delights</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="css/login.css">
</head>
<body>
    <header>
        <div class="container-fluid">
            <div class="d-flex justify-content-between align-items-center flex-wrap">
                <h1 style="font-size: 50px;">Korean Delights</h1>
                <select id="language-selector" class="form-select w-auto">
                    <option value="en" selected>English</option>
                    <option value="kr">한국어 (Korean)</option>
                </select>
                <nav class="navbar navbar-expand-sm navbar-light">
                    <button type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" class="navbar-toggler" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav mb-lg-0">
                            <li class="nav-item">
                                <a class="nav-link" href="index.html">
                                    <button class="btn btn-outline-warning">
                                        <i class="bi bi-shop"></i> <span data-key="home">Home</span>
                                    </button>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="shop.html">
                                    <button class="btn btn-outline-warning">
                                        <i class="fas fa-hotdog"></i> <span data-key="shop">Shop</span>
                                    </button>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="specials.html">
                                    <button class="btn btn-outline-warning">
                                        <i class="bi bi-lightning-charge"></i> <span data-key="specials">Special Offers</span>
                                    </button>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="wishlist.html">
                                    <button class="btn btn-outline-warning">
                                        <i class="bi bi-bag-heart"></i> <span data-key="wishlist">Wishlist</span>
                                    </button>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="cart.html">
                                    <button class="btn btn-outline-warning">
                                        <i class="bi bi-basket2-fill"></i> <span data-key="cart">Cart(0)</span>
                                    </button>
                </div>
            </nav>
            <div class="d-flex flex-column align-items-end">
                <ul class="signup d-flex flex-wrap mb-2">
                    <li class="nav-item me-2"><a class="nav-link" href="login.html" id="profile-link"><button class="btn btn-outline-warning"><i class="bi bi-person-circle"></i> Profile</button></a></li>
                </ul>
                <form class="d-flex w-100 mt-lg-2" role="search">
                    <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                    <button class="btn btn-outline-success text-bg-warning" type="submit">Search</button>
                </form>
            </div>
        </div>
    </div>
</header>

    <!-- Login form in login.html -->
    <form id="loginForm">
        <label for="uemail">Email:</label>
        <input type="text" id="uemail" required>

        <label for="password">Password:</label>
        <input type="password" id="password" required>

        <button class="btn btn-outline-warning" type="submit">Login</button>

    </form>
    <a id="loginForm" href="register.html"><button type="reg" class="btn btn-outline-warning"> Register</button></a>

    <script>
        document.getElementById('loginForm').addEventListener('submit', function (event) {
    event.preventDefault();

    const emailInput = document.getElementById('uemail').value;
    const passwordInput = document.getElementById('password').value;

    // Загружаем объект users из localStorage
    const users = JSON.parse(localStorage.getItem('users')) || {};

    // Проверяем совпадение введенных данных с данными в объекте users
    let isValidUser = false;
    for (let userId in users) {
        const user = users[userId];
        if (user.email === emailInput && user.password === passwordInput) {
            isValidUser = true;
            localStorage.setItem('isLoggedIn', 'true');
            localStorage.setItem('userEmail', emailInput.value);
            alert('Login successful!');
            window.location.href = 'account.html';

            // Меняем ссылку "Профиль" на profile.html после входа
            const profileLink = document.getElementById("profile-link");
            if (profileLink) {
                profileLink.setAttribute("href", "account.html");
            }
            break;
        }
    }

    if (!isValidUser) {
        alert('Incorrect email or password.');
    }
});

// При загрузке страницы обновляем кнопку, если пользователь вошел
window.addEventListener('load', function () {
    const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
    if (isLoggedIn) {
        document.querySelector('.signup').innerHTML =
            `<button class="btn btn-outline-warning" onclick="logout()">Logout</button>`;
    }
});

// Функция выхода
function logout() {
    localStorage.removeItem('isLoggedIn');
    localStorage.removeItem('userEmail');
    alert('You have been logged out.');
    window.location.reload();
}

    </script>



    <footer>
        <div class="footer-content">
            <div>
                <h3>Contacts</h3>
                <p><i class="bi bi-envelope"></i>Email: support@koreanshop.com</p>
                <p><i class="bi bi-telephone"></i>Phone Number: +7 (777) 777-77-77</p>
            </div>
            <div>
                <h3>Navigation</h3>
                <a href="index.html"><button class="btn btn-outline-warning"><i class="bi bi-shop"></i>Home</button></a>
                <a href="shop.html"><button class="btn btn-outline-warning"><i class="fas fa-hotdog"></i>Shop</button></a>
                <a href="contact.html"><button class="btn btn-outline-warning"><i class="bi bi-envelope"></i>Contact</button></a>
                <a href="about.html"><button class="btn btn-outline-warning"><i class="bi bi-info-circle"></i>About us</button></a>
                <button type="button" class="btn btn-warning" id="moon-light"><i class="bi-moon-fill"></i></button>
            </div>
            <div class="social-links">
                <h3><i class="bi bi-instagram"></i>Social-links</h3>
                <a>MukhambetMadiyar</a>
                <a>MadiOrazbek</a>
                <a>DanelAkhmetova</a>
            </div>
        </div>
        <p>&copy; 2024 Korean Shop.</p>
    </footer>
    <script src="js/night-mode.js"></script>
    <script src="js/lang.js"></script>
    <script src="js/session.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>
